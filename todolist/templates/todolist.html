{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Todolist</title>
{% endblock meta %}

{% block content %}
  <div class="container mb-5">
    <h1 class="mt-3">Hello, {{ user }}!</h1>
    <button class="btn btn-success mt-2 mb-4"><a href="{% url 'todolist:create_task' %}" class="text-decoration-none text-reset">+ Create New Task</a></button>
    {% for task in task_list %}
    <div id="accordion">
      <div class="card mb-3" style="max-width: 70vw;">
        <button class="btn {% if task.is_finished %} btn-success {% else %} btn-warning {% endif %} text-start text-decoration-none" data-bs-toggle="collapse" href="#collapse-{{ forloop.counter }}" aria-expanded="true" aria-controls="collapse-{{ forloop.counter }}" style="color:#F3DE8A; background-color: rgb(39, 40, 56, 0.9);">
          <div class="card-header" id="headingOne" style="background-color: transparent;">
            <h5 class="mb-0">
              <i class="fa fa-circle" {% if task.is_finished %} style="color: #43835c;" {% else %} style="color: #f3c343;" {% endif %}></i>
              {{ task.title }}
            </h5>
          </div>
        </button>
        <div id="collapse-{{ forloop.counter }}" class="collapse multi-collapse">
          <div class="card-body text-primary">
            <p class="card-subtitle mb-2 text-muted">Created on {{ task.date }}</p>
            <p class="card-text" style="color:rgb(39, 40, 56)">{{ task.description }}</p>
            {% if task.is_finished %}
            <button class="btn btn-outline-warning"><a href="{% url 'todolist:inverse_checkbox' task.id %}" class="text-decoration-none text-reset">Mark Undone</a></button>
            {% else %}
            <button class="btn btn-outline-success"><a href="{% url 'todolist:inverse_checkbox' task.id %}" class="text-decoration-none text-reset">Mark as Done</a></button>
            {% endif %}
            <button class="btn btn-outline-danger"><a href="{% url 'todolist:delete_task' task.id %}" class="text-decoration-none text-reset">Delete Task</a></button>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
{% endblock content %}